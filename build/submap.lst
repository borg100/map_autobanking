                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.6 #12439 (MINGW32)
                                      4 ;--------------------------------------------------------
                                      5 	.module submap
                                      6 	.optsdcc -mgbz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _set_level
                                     12 	.globl _set_bkg_submap_nonbanked
                                     13 	.globl _set_bkg_data_nonbanked
                                     14 	.globl _set_bkg_submap
                                     15 	.globl _set_bkg_data
                                     16 ;--------------------------------------------------------
                                     17 ; special function registers
                                     18 ;--------------------------------------------------------
                                     19 ;--------------------------------------------------------
                                     20 ; ram data
                                     21 ;--------------------------------------------------------
                                     22 	.area _DATA
                                     23 ;--------------------------------------------------------
                                     24 ; ram data
                                     25 ;--------------------------------------------------------
                                     26 	.area _INITIALIZED
                                     27 ;--------------------------------------------------------
                                     28 ; absolute external ram data
                                     29 ;--------------------------------------------------------
                                     30 	.area _DABS (ABS)
                                     31 ;--------------------------------------------------------
                                     32 ; global & static initialisations
                                     33 ;--------------------------------------------------------
                                     34 	.area _HOME
                                     35 	.area _GSINIT
                                     36 	.area _GSFINAL
                                     37 	.area _GSINIT
                                     38 ;--------------------------------------------------------
                                     39 ; Home
                                     40 ;--------------------------------------------------------
                                     41 	.area _HOME
                                     42 ;submap.c:3: void set_bkg_data_nonbanked(UINT8 first_tile, UINT8 nb_tiles, const UINT8 *tile_data, UINT8 bank)
                                     43 ;	---------------------------------
                                     44 ; Function set_bkg_data_nonbanked
                                     45 ; ---------------------------------
      000000                         46 _set_bkg_data_nonbanked::
                                     47 ;submap.c:8: UINT8 __save = _current_bank;
      000000 F0r00                   48 	ldh	a, (__current_bank + 0)
      000002 4F                      49 	ld	c, a
                                     50 ;submap.c:9: SWITCH_ROM_MBC1(bank);
      000003 F8 06                   51 	ldhl	sp,	#6
      000005 7E                      52 	ld	a, (hl)
      000006 E0r00                   53 	ldh	(__current_bank + 0), a
      000008 11 00 20                54 	ld	de, #0x2000
                                     55 ;submap.c:10: set_bkg_data(first_tile, nb_tiles, tile_data);
      00000B 3A                      56 	ld	a, (hl-)
      00000C 2B                      57 	dec	hl
      00000D 12                      58 	ld	(de), a
      00000E 2A                      59 	ld	a, (hl+)
      00000F 5F                      60 	ld	e, a
      000010 3A                      61 	ld	a, (hl-)
      000011 2B                      62 	dec	hl
      000012 57                      63 	ld	d, a
      000013 D5                      64 	push	de
      000014 3A                      65 	ld	a, (hl-)
      000015 57                      66 	ld	d, a
      000016 5E                      67 	ld	e, (hl)
      000017 D5                      68 	push	de
      000018 CDr00r00                69 	call	_set_bkg_data
      00001B E8 04                   70 	add	sp, #4
                                     71 ;submap.c:11: SWITCH_ROM_MBC1(__save);
      00001D 79                      72 	ld	a, c
      00001E E0r00                   73 	ldh	(__current_bank + 0), a
      000020 21 00 20                74 	ld	hl, #0x2000
      000023 71                      75 	ld	(hl), c
                                     76 ;submap.c:12: }
      000024 C9                      77 	ret
                                     78 ;submap.c:14: void set_bkg_submap_nonbanked(UINT8 x, UINT8 y, UINT8 w, UINT8 h, const UINT8 *map_data, UINT8 map_w, UINT8 bank)
                                     79 ;	---------------------------------
                                     80 ; Function set_bkg_submap_nonbanked
                                     81 ; ---------------------------------
      000025                         82 _set_bkg_submap_nonbanked::
                                     83 ;submap.c:19: UINT8 __save = _current_bank;
      000025 F0r00                   84 	ldh	a, (__current_bank + 0)
      000027 4F                      85 	ld	c, a
                                     86 ;submap.c:20: SWITCH_ROM_MBC1(bank);
      000028 F8 09                   87 	ldhl	sp,	#9
      00002A 7E                      88 	ld	a, (hl)
      00002B E0r00                   89 	ldh	(__current_bank + 0), a
      00002D 11 00 20                90 	ld	de, #0x2000
                                     91 ;submap.c:21: set_bkg_submap(x, y, w, h, map_data, map_w);
      000030 3A                      92 	ld	a, (hl-)
      000031 12                      93 	ld	(de), a
      000032 C5                      94 	push	bc
      000033 3A                      95 	ld	a, (hl-)
      000034 2B                      96 	dec	hl
      000035 F5                      97 	push	af
      000036 33                      98 	inc	sp
      000037 2A                      99 	ld	a, (hl+)
      000038 5F                     100 	ld	e, a
      000039 3A                     101 	ld	a, (hl-)
      00003A 2B                     102 	dec	hl
      00003B 57                     103 	ld	d, a
      00003C D5                     104 	push	de
      00003D 3A                     105 	ld	a, (hl-)
      00003E 57                     106 	ld	d, a
      00003F 3A                     107 	ld	a, (hl-)
      000040 5F                     108 	ld	e, a
      000041 D5                     109 	push	de
      000042 3A                     110 	ld	a, (hl-)
      000043 57                     111 	ld	d, a
      000044 5E                     112 	ld	e, (hl)
      000045 D5                     113 	push	de
      000046 CDr00r00               114 	call	_set_bkg_submap
      000049 E8 07                  115 	add	sp, #7
      00004B C1                     116 	pop	bc
                                    117 ;submap.c:22: SWITCH_ROM_MBC1(__save);
      00004C 79                     118 	ld	a, c
      00004D E0r00                  119 	ldh	(__current_bank + 0), a
      00004F 21 00 20               120 	ld	hl, #0x2000
      000052 71                     121 	ld	(hl), c
                                    122 ;submap.c:23: }
      000053 C9                     123 	ret
                                    124 	.area _HOME
                                    125 ;--------------------------------------------------------
                                    126 ; code
                                    127 ;--------------------------------------------------------
                                    128 	.area _CODE
                                    129 ;submap.c:25: void set_level(UINT8 map_width, UINT8 map_height, const void *tile_data, UINT8 tile_bank, const void *map_data, UINT8 map_bank)
                                    130 ;	---------------------------------
                                    131 ; Function set_level
                                    132 ; ---------------------------------
      000000                        133 _set_level::
                                    134 ;submap.c:27: set_bkg_data_nonbanked(0, 255u, tile_data, tile_bank);
      000000 F8 04                  135 	ldhl	sp,	#4
      000002 2A                     136 	ld	a, (hl+)
      000003 4F                     137 	ld	c, a
      000004 2A                     138 	ld	a, (hl+)
      000005 47                     139 	ld	b, a
      000006 7E                     140 	ld	a, (hl)
      000007 F5                     141 	push	af
      000008 33                     142 	inc	sp
      000009 C5                     143 	push	bc
      00000A 21 00 FF               144 	ld	hl, #0xff00
      00000D E5                     145 	push	hl
      00000E CDr00r00               146 	call	_set_bkg_data_nonbanked
      000011 E8 05                  147 	add	sp, #5
                                    148 ;submap.c:28: set_bkg_submap_nonbanked(0, 0, map_width, map_height, map_data, map_width, map_bank);
      000013 F8 07                  149 	ldhl	sp,	#7
      000015 2A                     150 	ld	a, (hl+)
      000016 4F                     151 	ld	c, a
      000017 2A                     152 	ld	a, (hl+)
      000018 47                     153 	ld	b, a
      000019 7E                     154 	ld	a, (hl)
      00001A F5                     155 	push	af
      00001B 33                     156 	inc	sp
      00001C F8 03                  157 	ldhl	sp,	#3
      00001E 2A                     158 	ld	a, (hl+)
      00001F F5                     159 	push	af
      000020 33                     160 	inc	sp
      000021 C5                     161 	push	bc
      000022 3A                     162 	ld	a, (hl-)
      000023 57                     163 	ld	d, a
      000024 5E                     164 	ld	e, (hl)
      000025 D5                     165 	push	de
      000026 AF                     166 	xor	a, a
      000027 0F                     167 	rrca
      000028 F5                     168 	push	af
      000029 CDr25r00               169 	call	_set_bkg_submap_nonbanked
      00002C E8 08                  170 	add	sp, #8
                                    171 ;submap.c:29: }
      00002E C9                     172 	ret
                                    173 	.area _CODE
                                    174 	.area _INITIALIZER
                                    175 	.area _CABS (ABS)
